{"version":3,"sources":["service/firebase.js","UserProvider.js","utils/board.js","components/Board/Square.js","components/Board/Board.js","components/Layout/PlayerStat.js","components/Page/Play.js","service/api.js","components/Page/Login.js","components/Page/Replay.js","components/Layout/Navbar.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","db","firestore","googleProvider","GoogleAuthProvider","signInWithGoogle","signInWithPopup","then","res","console","log","user","catch","error","message","logOut","signOut","UserContext","createContext","UserProvider","children","useState","setuser","useEffect","onAuthStateChanged","a","displayName","uid","Provider","value","checkWinner","size","board","zeroExists","checkArray","diagonalLeft","diagonalRight","i","horizontal","vertical","push","j","playerWin","filter","check","every","length","botWin","generateBoard","row","blankStyle","color","background","nonBlankStyle","hightLightStyle","Square","handleClick","highlight","className","onClick","style","Board","highlightSquare","map","square","some","v","PlayerStat","win","lose","PlayState","botPlay","zeros","Math","floor","random","Page","setSize","setBoard","state","setState","history","setHistory","winningSquare","setWinningSquare","stat","setStat","useContext","redirect","setredirect","collection","doc","get","exists","data","set","getUserStat","to","nextPlayState","winner","botTurn","newBoard","boti","botj","nextState","turn","gameEnd","winState","outcome","add","time","FieldValue","serverTimestamp","saveReplay","newStat","updateUserStat","type","onChange","e","newSize","Number","target","min","fisrtTurn","action","gameStart","newState","botAction","Login","src","alt","width","height","Replay","replay","setReplay","gameText","setGameText","replayBoard","setReplayBoard","replayMoves","setReplayMoves","currentState","setCurrentState","where","orderBy","querySnapshot","allReplay","forEach","alert","getHistory","r","chooseReplay","m","index","chooseMoves","Navbar","App","basename","process","exact","path","component","Play","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9ce6a1d0.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\n\r\nfirebase.initializeApp({\r\n    apiKey: \"AIzaSyCUbKNxSycF3qkedVgPl9CRPRv3jGt_66Q\",\r\n    authDomain: \"tic-tac-toe-6ae9b.firebaseapp.com\",\r\n    projectId: \"tic-tac-toe-6ae9b\",\r\n    storageBucket: \"tic-tac-toe-6ae9b.appspot.com\",\r\n    messagingSenderId: \"936609038718\",\r\n    appId: \"1:936609038718:web:a113918f46f2e628ddf32f\"\r\n});\r\n\r\n\r\nexport const auth = firebase.auth();\r\nexport const db = firebase.firestore();\r\n\r\nconst googleProvider = new firebase.auth.GoogleAuthProvider();\r\n\r\nexport const signInWithGoogle = () => {\r\n  auth.signInWithPopup(googleProvider).then((res) => {\r\n    console.log(res.user)\r\n  }).catch((error) => {\r\n    console.log(error.message)\r\n  })\r\n}\r\n\r\nexport const logOut = () => {\r\n  auth.signOut().then(()=> {\r\n    console.log('logged out')\r\n  }).catch((error) => {\r\n    console.log(error.message)\r\n  })\r\n}\r\n\r\nexport const getServerTimeStamp = () => firebase.firestore.FieldValue.serverTimestamp();","import React, { useState, useEffect, createContext } from \"react\";\r\nimport { auth } from \"./service/firebase\"\r\n\r\n\r\nexport const UserContext = createContext({})\r\n\r\nconst UserProvider = ({ children }) => {\r\n    const [user, setuser] = useState(null);\r\n    useEffect(() => {\r\n        auth.onAuthStateChanged(async (user) => {\r\n            if (user !== null) {\r\n                const { displayName, uid } = user;\r\n                setuser({\r\n                    displayName,\r\n                    uid,\r\n                });\r\n            } else {\r\n                setuser(null);\r\n            }\r\n        })\r\n    }, [])\r\n    return (\r\n        <UserContext.Provider value={user}>{children}</UserContext.Provider>\r\n    )\r\n}\r\n\r\nexport default UserProvider;","export const checkWinner = (size, board) => {\r\n    let zeroExists = false;\r\n\r\n    const checkArray = [];\r\n\r\n    // horizontal & vertical & Diagonal\r\n    const diagonalLeft = [];\r\n    const diagonalRight = [];\r\n    for (let i = 0; i < size; i++) {\r\n        const horizontal = [];\r\n        const vertical = [];\r\n        diagonalLeft.push([i, i])\r\n        diagonalRight.push([i, size - i - 1]);\r\n\r\n        for (let j = 0; j < size; j++) {\r\n            horizontal.push([i, j]);\r\n            vertical.push([j, i]);\r\n            zeroExists = zeroExists || board[i][j] === 0;\r\n        }\r\n        checkArray.push(horizontal);\r\n        checkArray.push(vertical);\r\n    }\r\n\r\n    checkArray.push(diagonalLeft);\r\n    checkArray.push(diagonalRight);\r\n\r\n    // check if player win\r\n    const playerWin = checkArray.filter((check) => check.every(([i, j]) => board[i][j] === 1));\r\n    if (playerWin.length > 0) {\r\n        return [1, playerWin[0]];\r\n    }\r\n\r\n    // check if bot win\r\n    const botWin = checkArray.filter((check) => check.every(([i, j]) => board[i][j] === -1));\r\n    if (botWin.length > 0) {\r\n        return [-1, botWin[0]];\r\n    }\r\n\r\n    // draw\r\n    if (!zeroExists) {\r\n        return [0, []];\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\nexport const generateBoard = (size) => {\r\n\r\n    const board = [];\r\n    for (let i = 0; i < size; i++) {\r\n        const row = [];\r\n        for (let j = 0; j < size; j++) {\r\n            row.push(0)\r\n        }\r\n        board.push(row);\r\n    }\r\n\r\n    return board;\r\n}","import React from 'react'\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Square = ({ value, handleClick, highlight }) => {\r\n    return (\r\n        <button\r\n            className=\"square\"\r\n            onClick={handleClick}\r\n            style={value === 0 ? blankStyle : highlight ? hightLightStyle : nonBlankStyle}\r\n        >\r\n            {value === 1 ? \"X\" : \"O\"}\r\n        </button>\r\n    )\r\n}\r\n\r\nSquare.propTypes = {\r\n    value: PropTypes.number.isRequired,\r\n    handleClick: PropTypes.func.isRequired,\r\n    highlight: PropTypes.bool.isRequired,\r\n}\r\n\r\nconst blankStyle = {\r\n    color: \"white\",\r\n    background: \"white\",\r\n}\r\n\r\nconst nonBlankStyle = {\r\n    color: \"black\",\r\n    background: \"white\",\r\n}\r\n\r\nconst hightLightStyle = {\r\n    color: \"red\",\r\n}\r\n\r\nexport default Square;\r\n","import React from 'react'\r\nimport Square from './Square';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Board = ({ board, handleClick, highlightSquare }) => {\r\n    return (\r\n        <div className=\"board\">\r\n            {board.map((row, i) => (\r\n                <div className=\"board-row\" key={i}>\r\n                    {row.map((square, j) =>\r\n                        <Square\r\n                            key={`${i}${j}`}\r\n                            value={square}\r\n                            handleClick={() => handleClick(i, j)}\r\n                            highlight={highlightSquare.some(v => v[0] === i && v[1] === j)}\r\n                        />)}\r\n                </div>\r\n            ))}\r\n        </div>\r\n    )\r\n}\r\n\r\nBoard.propTypes = {\r\n    board: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.number)).isRequired,\r\n    handleClick: PropTypes.func.isRequired,\r\n    highlightSquare: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.number)),\r\n}\r\n\r\nexport default Board;\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types';\r\n\r\nconst PlayerStat = ({ displayName, win, lose }) => {\r\n\r\n    return (\r\n        <div>\r\n            Player {displayName} {win} : {lose} BOT\r\n        </div>\r\n    )\r\n}\r\n\r\nPlayerStat.propTypes = {\r\n    displayName: PropTypes.string.isRequired,\r\n    win: PropTypes.number.isRequired,\r\n    lose: PropTypes.number.isRequired,\r\n}\r\n\r\nexport default PlayerStat\r\n","import React, { useContext, useEffect, useState } from 'react'\r\nimport { Redirect } from 'react-router';\r\nimport { getUserStat, saveReplay, updateUserStat } from '../../service/api';\r\nimport { UserContext } from '../../UserProvider';\r\nimport { checkWinner, generateBoard } from '../../utils/board';\r\nimport Board from '../Board/Board';\r\nimport PlayerStat from '../Layout/PlayerStat';\r\n\r\nconst PlayState = {\r\n    WAITING: \"WAITING TO START\",\r\n    PLAYER_TURN: \"PLAYER Turn\",\r\n    BOT_TURN: \"BOT Turn\",\r\n    PLAYER_WIN: \"PLAYER WIN!!\",\r\n    BOT_WIN: \"BOT WIN!!\",\r\n    DRAW: \"DRAW!!\",\r\n}\r\n\r\nconst Page = () => {\r\n\r\n    const [size, setSize] = useState(3);\r\n    const [board, setBoard] = useState(generateBoard(3));\r\n    const [state, setState] = useState(PlayState.WAITING);\r\n    const [history, setHistory] = useState([]);\r\n    const [winningSquare, setWinningSquare] = useState([]);\r\n    const [stat, setStat] = useState({ win: 0, lose: 0 });\r\n\r\n    const user = useContext(UserContext);\r\n    const [redirect, setredirect] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (!user) {\r\n            setredirect(\"/\");\r\n        } else {\r\n            getUserStat(user, setStat);\r\n        }\r\n    }, [user]);\r\n\r\n    if (redirect) {\r\n        return <Redirect to={redirect} />;\r\n    }\r\n\r\n    const onSizeChange = (e) => {\r\n        if (state === PlayState.WAITING) {\r\n            const newSize = Number(e.target.value);\r\n            setSize(newSize);\r\n            setBoard(generateBoard(newSize));\r\n        }\r\n    }\r\n\r\n    const nextPlayState = (state, board, size) => {\r\n        \r\n        const winner = checkWinner(size, board);\r\n\r\n        if (!winner) {\r\n            // change turn\r\n            return state === PlayState.PLAYER_TURN\r\n                ? PlayState.BOT_TURN\r\n                : state === PlayState.BOT_TURN\r\n                    ? PlayState.PLAYER_TURN\r\n                    : PlayState.WAITING;\r\n        } else {\r\n            setWinningSquare(winner[1]);\r\n            if (winner[0] === 0) return PlayState.DRAW;\r\n            if (winner[0] === 1) return PlayState.PLAYER_WIN;\r\n            if (winner[0] === -1) return PlayState.BOT_WIN;\r\n        }\r\n\r\n    }\r\n\r\n    const botTurn = (board, state) => {\r\n\r\n        const newBoard = [...board];\r\n\r\n        // bot play\r\n        const [boti, botj] = botPlay(newBoard);\r\n        newBoard[boti][botj] = -1;\r\n\r\n        const nextState = nextPlayState(state, newBoard, size);\r\n\r\n        setBoard(newBoard);\r\n        setState(nextState);\r\n\r\n        return [nextState, {\r\n            i: boti,\r\n            j: botj,\r\n            value: -1,\r\n            turn: state,\r\n        }];\r\n    }\r\n\r\n    const gameStart = () => {\r\n        // start a with random first turn\r\n        const fisrtTurn = Math.random() > 0.5 ? PlayState.PLAYER_TURN : PlayState.BOT_TURN;\r\n\r\n        // bot go first\r\n        if (fisrtTurn === PlayState.BOT_TURN) {\r\n            const action = botTurn(board, fisrtTurn)[1];\r\n            setHistory([action]);\r\n        }\r\n        else setState(fisrtTurn);\r\n    }\r\n\r\n    const gameEnd = (history, winState, newBoard) => {\r\n        // game end;\r\n        saveReplay(history, winState, size, user.uid);\r\n\r\n        const newStat = { ...stat };\r\n        if (winState === PlayState.PLAYER_WIN) {\r\n            newStat.win += 1;\r\n            setStat(newStat);\r\n        } else if (winState === PlayState.BOT_WIN) {\r\n            newStat.lose += 1;\r\n            setStat(newStat);\r\n        }\r\n        // update stat\r\n        updateUserStat(user.uid, newStat);\r\n        setState(winState);\r\n        setBoard(newBoard);\r\n    }\r\n\r\n    const gameReset = () => {\r\n        // Reset game\r\n        setHistory([]);\r\n        setWinningSquare([]);\r\n        setBoard(generateBoard(size));\r\n        setState(PlayState.WAITING);\r\n    }\r\n\r\n    const onClickStartOrReset = () => {\r\n        switch (state) {\r\n            case PlayState.WAITING:\r\n                gameStart();\r\n                break;\r\n            case PlayState.PLAYER_WIN:\r\n            case PlayState.BOT_WIN:\r\n            case PlayState.DRAW:\r\n                gameReset();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    const handleClickSquare = (i, j) => {\r\n\r\n        if (board[i][j] !== 0 || (state !== PlayState.PLAYER_TURN && state !== PlayState.BOT_TURN)) return;\r\n\r\n        const action = [];\r\n        const value = 1;\r\n        const newBoard = [...board];\r\n        newBoard[i][j] = value;\r\n        action.push({\r\n            i, j, value,\r\n            turn: state,\r\n        });\r\n        let newState = nextPlayState(state, newBoard, size);\r\n\r\n        // operate bot turn\r\n        if (newState === PlayState.BOT_TURN) {\r\n            const [nextState, botAction] = botTurn(newBoard, newState);\r\n            action.push(botAction);\r\n            newState = nextState;\r\n        }\r\n\r\n        if (newState === PlayState.BOT_WIN || newState === PlayState.PLAYER_WIN || newState === PlayState.DRAW) {\r\n            gameEnd([...history, ...action], newState, newBoard);\r\n        } else {\r\n            setHistory([...history, ...action]);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {state === PlayState.WAITING ? (\r\n                <div className=\"choose-size\">\r\n                    <label>Choose Size: </label>\r\n                    <input type=\"number\" value={size} onChange={onSizeChange} min={1} />\r\n                </div>\r\n\r\n            ) : (\r\n                <div className=\"turn-state\">\r\n                    {state}\r\n                </div>\r\n            )}\r\n\r\n            {state !== PlayState.PLAYER_TURN && state !== PlayState.BOT_TURN ? (\r\n                <button onClick={onClickStartOrReset} className=\"btn btn-primary my-2\">\r\n                    {state === PlayState.WAITING ? \"Click To Start Game\" : \"Reset\"}\r\n                </button>\r\n            ) : null}\r\n\r\n            <Board board={board} handleClick={handleClickSquare} highlightSquare={winningSquare} />\r\n\r\n            {user ? <PlayerStat displayName={user.displayName} win={stat.win} lose={stat.lose} /> : null}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst botPlay = (board) => {\r\n    // get all 0 and randomly fill it\r\n    const zeros = [];\r\n    for (let i = 0; i < board.length; i++) {\r\n        for (let j = 0; j < board.length; j++) {\r\n            if (board[i][j] === 0) {\r\n                zeros.push([i, j]);\r\n            }\r\n        }\r\n    }\r\n\r\n    // get random i,j\r\n    return zeros[Math.floor((Math.random() * zeros.length))]\r\n}\r\n\r\nexport default Page;\r\n","import { db, getServerTimeStamp } from './firebase';\r\n\r\nexport const getUserStat = (user, setStat) => {\r\n    db.collection(\"userstat\").doc(user.uid).get()\r\n        .then((res) => {\r\n            if (!res.exists) {\r\n                // create new\r\n                db.collection(\"userstat\").doc(user.uid).set({ win: 0, lose: 0 });\r\n            } else {\r\n                setStat(res.data());\r\n            }\r\n        })\r\n}\r\n\r\nexport const getHistory = (user, setReplay) => {\r\n    db.collection(\"history\")\r\n        .where(\"uid\", \"==\", user.uid)\r\n        .orderBy(\"time\")\r\n        .get()\r\n        .then(querySnapshot => {\r\n            const allReplay = [];\r\n            querySnapshot.forEach(doc => {\r\n                allReplay.push(doc.data());\r\n            });\r\n            setReplay(allReplay);\r\n        })\r\n        .catch(error => alert(error.message));\r\n}\r\n\r\nexport const saveReplay = (history, outcome, size, uid) => {\r\n    // save replay to db\r\n    db.collection(\"history\").add({\r\n        history,\r\n        outcome,\r\n        size,\r\n        uid,\r\n        time: getServerTimeStamp(),\r\n    });\r\n}\r\n\r\nexport const updateUserStat = (uid, newStat) => {\r\n    db.collection(\"userstat\").doc(uid).set(newStat);\r\n}","import React, { useEffect, useContext, useState } from 'react';\r\nimport { signInWithGoogle } from '../../service/firebase';\r\nimport { UserContext } from '../../UserProvider';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\n\r\nconst Login = () => {\r\n    const user = useContext(UserContext);\r\n    const [redirect, setredirect] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            setredirect('/play/')\r\n        }\r\n    }, [user]);\r\n\r\n    if (redirect) {\r\n        return <Redirect to={redirect} />\r\n    }\r\n\r\n    return (\r\n        <div className=\"login\">\r\n            <h1>Tic Tac Toe Game!!!</h1>\r\n            <div className=\"login-buttons mt-3\">\r\n                <button className=\"btn btn-light border border-dark\" onClick={signInWithGoogle}>\r\n                    <img src=\"https://cdn.icon-icons.com/icons2/2119/PNG/512/google_icon_131222.png\" alt=\"google icon\" style={{width: \"25px\", height: \"25px\"}}/>\r\n                    <span> Continue with Google</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;","import React, { useContext, useEffect, useState } from 'react'\r\nimport { Redirect } from 'react-router';\r\nimport { getHistory } from '../../service/api';\r\nimport { UserContext } from '../../UserProvider';\r\nimport { checkWinner, generateBoard } from '../../utils/board';\r\nimport Board from '../Board/Board';\r\n\r\nconst Replay = () => {\r\n\r\n    const user = useContext(UserContext);\r\n    const [redirect, setredirect] = useState(null);\r\n\r\n    const [replay, setReplay] = useState([]);\r\n    const [gameText, setGameText] = useState(\"\");\r\n    const [replayBoard, setReplayBoard] = useState(null);\r\n    const [replayMoves, setReplayMoves] = useState([]);\r\n    const [currentState, setCurrentState] = useState(\"\");\r\n    const [winningSquare, setWinningSquare] = useState([]);\r\n\r\n    useEffect(() => {\r\n        if (!user) {\r\n            setredirect(\"/\");\r\n        } else {\r\n            getHistory(user, setReplay)\r\n        }\r\n    }, [user]);\r\n    if (redirect) {\r\n        return <Redirect to={redirect} />;\r\n    }\r\n\r\n    const chooseReplay = (i) => {\r\n        const history = replay[i].history;\r\n        console.log(history);\r\n        const board = generateBoard(replay[i].size);\r\n        board[history[0].i][history[0].j] = history[0].value;\r\n\r\n        setReplayBoard(board);\r\n        setReplayMoves(history);\r\n        setCurrentState(history[0].turn);\r\n        setWinningSquare([]);\r\n        setGameText(`Game ${i + 1} ${replay[i].outcome}`)\r\n    }\r\n\r\n    const chooseMoves = (i) => {\r\n        const board = replayBoard.map(row => row.map(r => 0));\r\n        // recreate board\r\n        for (let index = 0; index <= i; index++) {\r\n            board[replayMoves[index].i][replayMoves[index].j] = replayMoves[index].value;\r\n        }\r\n\r\n        // if lastest moves show who win\r\n        if (i === replayMoves.length - 1) {\r\n            const winningSquare = checkWinner(board.length, board)[1];\r\n            setWinningSquare(winningSquare);\r\n        } \r\n        else {\r\n            setWinningSquare([]);\r\n        }\r\n\r\n        setReplayBoard(board);\r\n        setCurrentState(replayMoves[i].turn);\r\n    }\r\n\r\n    return (\r\n        <div className=\"container mt-3\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-3 text-start border border-dark rounded\">\r\n                    Replay List\r\n                {replay.map((r, i) => (\r\n                    <div className=\"my-3\" key={i}>\r\n                        <button\r\n                            onClick={() => chooseReplay(i)}\r\n                            className=\"btn btn-primary\"\r\n                        >\r\n                            {`Game ${i + 1} ${r.outcome}`}\r\n                        </button>\r\n                    </div>\r\n                ))}\r\n                </div>\r\n\r\n                <div className=\"col-md-9\">\r\n\r\n                    <h2>{gameText}</h2>\r\n\r\n                    {replayBoard && <Board board={replayBoard} handleClick={() => { }} highlightSquare={winningSquare} />}\r\n\r\n                    <h3 className=\"play-state my-2\">\r\n                        {currentState}\r\n                    </h3>\r\n\r\n                    {replayMoves.map((m, i) => (\r\n                        <button\r\n                            className=\"m-2 btn btn-secondary\"\r\n                            key={i}\r\n                            onClick={() => chooseMoves(i)}\r\n                        >\r\n                            {`move${i + 1}`}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Replay\r\n","import React, { useContext } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { logOut } from '../../service/firebase';\r\nimport { UserContext } from '../../UserProvider';\r\n\r\nconst Navbar = () => {\r\n\r\n    const user = useContext(UserContext);\r\n\r\n    return (\r\n        <nav className=\"navbar navbar-light bg-light\">\r\n            <div className=\"container\">\r\n                <h1 className=\"navbar-brand\">Tic Tac Toe</h1>\r\n                {user && (\r\n                    <div className=\"d-flex\">\r\n                        <Link className=\"nav-link\" to=\"/play/\">Play</Link>\r\n                        <Link className=\"nav-link\" to=\"/replay/\">Watch Replay</Link>\r\n                        <button className=\"btn btn-outline-danger me-2\" onClick={logOut}>Logout</button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default Navbar\r\n","import './App.css';\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Play from './components/Page/Play';\nimport UserProvider from './UserProvider';\nimport Login from './components/Page/Login';\nimport Replay from './components/Page/Replay';\nimport Navbar from './components/Layout/Navbar';\n\nfunction App() {\n  return (\n    <UserProvider>\n      <Router basename={process.env.PUBLIC_URL}>\n        <Navbar />\n        <div className=\"App\">\n          <Switch>\n            <Route exact path=\"/\" component={Login} />\n            <Route exact path=\"/play\" component={Play} />\n            <Route exact path=\"/replay\" component={Replay} />\n          </Switch>\n        </div>\n      </Router>\n    </UserProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}