(this["webpackJsonptic-tac-toe"]=this["webpackJsonptic-tac-toe"]||[]).push([[0],{38:function(e,t,c){},48:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),r=c(29),i=c.n(r),s=(c(38),c(16)),o=c(4),u=c(33),l=c(20),j=c(5),b=c(17);c(39),c(49);b.a.initializeApp({apiKey:"AIzaSyCUbKNxSycF3qkedVgPl9CRPRv3jGt_66Q",authDomain:"tic-tac-toe-6ae9b.firebaseapp.com",projectId:"tic-tac-toe-6ae9b",storageBucket:"tic-tac-toe-6ae9b.appspot.com",messagingSenderId:"936609038718",appId:"1:936609038718:web:a113918f46f2e628ddf32f"});var h=b.a.auth(),d=b.a.firestore(),O=new b.a.auth.GoogleAuthProvider,f=function(){h.signInWithPopup(O).then((function(e){console.log(e.user)})).catch((function(e){console.log(e.message)}))},m=function(){h.signOut().then((function(){console.log("logged out")})).catch((function(e){console.log(e.message)}))},v=c(25),p=c.n(v),x=c(31),g=c(2),y=Object(n.createContext)({}),N=function(e){var t=e.children,c=Object(n.useState)(null),a=Object(j.a)(c,2),r=a[0],i=a[1];return Object(n.useEffect)((function(){h.onAuthStateChanged(function(){var e=Object(x.a)(p.a.mark((function e(t){var c,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==t?(c=t.displayName,n=t.uid,i({displayName:c,uid:n})):i(null);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(g.jsx)(y.Provider,{value:r,children:t})},S=function(e,t){for(var c=!1,n=[],a=[],r=[],i=0;i<e;i++){var s=[],o=[];a.push([i,i]),r.push([i,e-i-1]);for(var u=0;u<e;u++)s.push([i,u]),o.push([u,i]),c=c||0===t[i][u];n.push(s),n.push(o)}n.push(a),n.push(r);var l=n.filter((function(e){return e.every((function(e){var c=Object(j.a)(e,2),n=c[0],a=c[1];return 1===t[n][a]}))}));if(l.length>0)return[1,l[0]];var b=n.filter((function(e){return e.every((function(e){var c=Object(j.a)(e,2),n=c[0],a=c[1];return-1===t[n][a]}))}));return b.length>0?[-1,b[0]]:c?null:[0,[]]},k=function(e){for(var t=[],c=0;c<e;c++){for(var n=[],a=0;a<e;a++)n.push(0);t.push(n)}return t},C={color:"white",background:"white"},w={color:"black",background:"white"},T={color:"red"},A=function(e){var t=e.value,c=e.handleClick,n=e.highlight;return Object(g.jsx)("button",{className:"square",onClick:c,style:0===t?C:n?T:w,children:1===t?"X":"O"})},I=function(e){var t=e.board,c=e.handleClick,n=e.highlightSquare;return Object(g.jsx)("div",{className:"board",children:t.map((function(e,t){return Object(g.jsx)("div",{className:"board-row",children:e.map((function(e,a){return Object(g.jsx)(A,{value:e,handleClick:function(){return c(t,a)},highlight:n.some((function(e){return e[0]===t&&e[1]===a}))},"".concat(t).concat(a))}))},t)}))})},P=function(e){var t=e.displayName,c=e.win,n=e.lose;return Object(g.jsxs)("div",{children:["Player ",t," ",c," : ",n," BOT"]})},G="WAITING TO START",R="PLAYER Turn",E="BOT Turn",z="PLAYER WIN!!",B="BOT WIN!!",W="DRAW!!",q=function(e){for(var t=[],c=0;c<e.length;c++)for(var n=0;n<e.length;n++)0===e[c][n]&&t.push([c,n]);return t[Math.floor(Math.random()*t.length)]},L=function(){var e=Object(n.useState)(3),t=Object(j.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(k(3)),i=Object(j.a)(r,2),s=i[0],h=i[1],O=Object(n.useState)(G),f=Object(j.a)(O,2),m=f[0],v=f[1],p=Object(n.useState)([]),x=Object(j.a)(p,2),N=x[0],C=x[1],w=Object(n.useState)([]),T=Object(j.a)(w,2),A=T[0],L=T[1],M=Object(n.useState)({win:0,lose:0}),_=Object(j.a)(M,2),D=_[0],F=_[1],J=Object(n.useContext)(y),K=Object(n.useState)(null),V=Object(j.a)(K,2),Y=V[0],Q=V[1];if(Object(n.useEffect)((function(){J?function(e,t){d.collection("userstat").doc(e.uid).get().then((function(c){c.exists?t(c.data()):d.collection("userstat").doc(e.uid).set({win:0,lose:0})}))}(J,F):Q("/")}),[J]),Y)return Object(g.jsx)(o.a,{to:Y});var U=function(e,t,c){var n=S(c,t);return n?(L(n[1]),0===n[0]?W:1===n[0]?z:-1===n[0]?B:void 0):e===R?E:e===E?R:G},X=function(e,t){var n=Object(l.a)(e),a=q(n),r=Object(j.a)(a,2),i=r[0],s=r[1];n[i][s]=-1;var o=U(t,n,c);return h(n),v(o),[o,{i:i,j:s,value:-1,turn:t}]},H=function(e,t,n){!function(e,t,c,n){d.collection("history").add({history:e,outcome:t,size:c,uid:n,time:b.a.firestore.FieldValue.serverTimestamp()})}(e,t,c,J.uid);var a=Object(u.a)({},D);t===z?(a.win+=1,F(a)):t===B&&(a.lose+=1,F(a)),function(e,t){d.collection("userstat").doc(e).set(t)}(J.uid,a),v(t),h(n)};return Object(g.jsxs)("div",{children:[m===G?Object(g.jsxs)("div",{className:"choose-size",children:[Object(g.jsx)("label",{children:"Choose Size: "}),Object(g.jsx)("input",{type:"number",value:c,onChange:function(e){if(m===G){var t=Number(e.target.value);a(t),h(k(t))}},min:1})]}):Object(g.jsx)("div",{className:"turn-state",children:m}),m!==R&&m!==E?Object(g.jsx)("button",{onClick:function(){switch(m){case G:!function(){var e=Math.random()>.5?R:E;if(e===E){var t=X(s,e)[1];C([t])}else v(e)}();break;case z:case B:case W:C([]),L([]),h(k(c)),v(G)}},className:"btn btn-primary my-2",children:m===G?"Click To Start Game":"Reset"}):null,Object(g.jsx)(I,{board:s,handleClick:function(e,t){if(0===s[e][t]&&(m===R||m===E)){var n=[],a=Object(l.a)(s);a[e][t]=1,n.push({i:e,j:t,value:1,turn:m});var r=U(m,a,c);if(r===E){var i=X(a,r),o=Object(j.a)(i,2),u=o[0],b=o[1];n.push(b),r=u}r===B||r===z||r===W?H([].concat(Object(l.a)(N),n),r,a):C([].concat(Object(l.a)(N),n))}},highlightSquare:A}),J?Object(g.jsx)(P,{displayName:J.displayName,win:D.win,lose:D.lose}):null]})},M=function(){var e=Object(n.useContext)(y),t=Object(n.useState)(null),c=Object(j.a)(t,2),a=c[0],r=c[1];return Object(n.useEffect)((function(){e&&r("/play/")}),[e]),a?Object(g.jsx)(o.a,{to:a}):Object(g.jsxs)("div",{className:"login",children:[Object(g.jsx)("h1",{children:"Tic Tac Toe Game!!!"}),Object(g.jsx)("div",{className:"login-buttons mt-3",children:Object(g.jsxs)("button",{className:"btn btn-light border border-dark",onClick:f,children:[Object(g.jsx)("img",{src:"https://cdn.icon-icons.com/icons2/2119/PNG/512/google_icon_131222.png",alt:"google icon",style:{width:"25px",height:"25px"}}),Object(g.jsx)("span",{children:" Continue with Google"})]})})]})},_=function(){var e=Object(n.useContext)(y),t=Object(n.useState)(null),c=Object(j.a)(t,2),a=c[0],r=c[1],i=Object(n.useState)([]),s=Object(j.a)(i,2),u=s[0],l=s[1],b=Object(n.useState)(""),h=Object(j.a)(b,2),O=h[0],f=h[1],m=Object(n.useState)(null),v=Object(j.a)(m,2),p=v[0],x=v[1],N=Object(n.useState)([]),C=Object(j.a)(N,2),w=C[0],T=C[1],A=Object(n.useState)(""),P=Object(j.a)(A,2),G=P[0],R=P[1],E=Object(n.useState)([]),z=Object(j.a)(E,2),B=z[0],W=z[1];if(Object(n.useEffect)((function(){e?function(e,t){d.collection("history").where("uid","==",e.uid).orderBy("time").get().then((function(e){var c=[];e.forEach((function(e){c.push(e.data())})),t(c)})).catch((function(e){return alert(e.message)}))}(e,l):r("/")}),[e]),a)return Object(g.jsx)(o.a,{to:a});return Object(g.jsx)("div",{className:"container mt-3",children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsxs)("div",{className:"col-md-3 text-start border border-dark rounded",children:["Replay List",u.map((function(e,t){return Object(g.jsx)("div",{className:"my-3",children:Object(g.jsx)("button",{onClick:function(){return function(e){var t=u[e].history;console.log(t);var c=k(u[e].size);c[t[0].i][t[0].j]=t[0].value,x(c),T(t),R(t[0].turn),W([]),f("Game ".concat(e+1," ").concat(u[e].outcome))}(t)},className:"btn btn-primary",children:"Game ".concat(t+1," ").concat(e.outcome)})},t)}))]}),Object(g.jsxs)("div",{className:"col-md-9",children:[Object(g.jsx)("h2",{children:O}),p&&Object(g.jsx)(I,{board:p,handleClick:function(){},highlightSquare:B}),Object(g.jsx)("h3",{className:"play-state my-2",children:G}),w.map((function(e,t){return Object(g.jsx)("button",{className:"m-2 btn btn-secondary",onClick:function(){return function(e){for(var t=p.map((function(e){return e.map((function(e){return 0}))})),c=0;c<=e;c++)t[w[c].i][w[c].j]=w[c].value;if(e===w.length-1){var n=S(t.length,t)[1];W(n)}else W([]);x(t),R(w[e].turn)}(t)},children:"move".concat(t+1)},t)}))]})]})})},D=function(){var e=Object(n.useContext)(y);return Object(g.jsx)("nav",{className:"navbar navbar-light bg-light",children:Object(g.jsxs)("div",{className:"container",children:[Object(g.jsx)("h1",{className:"navbar-brand",children:"Tic Tac Toe"}),e&&Object(g.jsxs)("div",{className:"d-flex",children:[Object(g.jsx)(s.b,{className:"nav-link",to:"/play/",children:"Play"}),Object(g.jsx)(s.b,{className:"nav-link",to:"/replay/",children:"Watch Replay"}),Object(g.jsx)("button",{className:"btn btn-outline-danger me-2",onClick:m,children:"Logout"})]})]})})};var F=function(){return Object(g.jsx)(N,{children:Object(g.jsxs)(s.a,{basename:"",children:[Object(g.jsx)(D,{}),Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)(o.d,{children:[Object(g.jsx)(o.b,{exact:!0,path:"/",component:M}),Object(g.jsx)(o.b,{exact:!0,path:"/play",component:L}),Object(g.jsx)(o.b,{exact:!0,path:"/replay",component:_})]})})]})})};i.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(F,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.9ce6a1d0.chunk.js.map